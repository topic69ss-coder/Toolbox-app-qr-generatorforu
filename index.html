<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Toolbox - QR Generator</title>

<style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:Inter,Arial,system-ui;}
    body{background:#f2f3f7;padding-bottom:90px;} /* Space for bottom nav */
    header{background:white;padding:14px;font-size:20px;font-weight:700;
           text-align:center;box-shadow:0 2px 10px rgba(0,0,0,0.06);position:sticky;top:0;z-index:50;}

    /* Screens */
    .screen{display:none;padding:18px;}
    .active-screen{display:block;}

    /* Bottom Nav */
    .bottom-nav{
        position:fixed;bottom:0;left:0;right:0;height:65px;
        display:flex;justify-content:space-around;align-items:center;
        background:white;border-top:1px solid #ddd;
        box-shadow:0 -2px 10px rgba(0,0,0,0.06);
        z-index:20;
    }
    .nav-item{
        flex:1;text-align:center;font-size:12px;color:#777;cursor:pointer;
        padding-top:6px;
    }
    .nav-item.active{color:#6c63ff;font-weight:700;}
    .nav-item span{display:block;font-size:20px;margin-bottom:2px;}

    /* Simple card */
    .card{background:white;border-radius:10px;padding:16px;
          box-shadow:0 3px 10px rgba(0,0,0,0.05);margin-bottom:18px;}

    /* Calculator */
    .display{
        background:#111;color:white;font-size:28px;
        padding:12px;border-radius:10px;text-align:right;margin-bottom:10px;
    }
    .keys{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;}
    .key{background:#fff;border-radius:8px;padding:16px;text-align:center;
         font-size:18px;box-shadow:0 2px 5px rgba(0,0,0,0.08);cursor:pointer;}
    .op{background:#6c63ff;color:white;}

    /* Inputs + buttons */
    input, select{
        width:100%;padding:10px;margin:8px 0;
        border-radius:8px;border:1px solid #ccc;
    }
    button{
        padding:12px;background:#6c63ff;color:white;border:none;
        border-radius:8px;width:100%;margin-top:10px;font-size:16px;
    }

    /* QR preview box */
    #qrPreview{
        margin-top:10px;display:flex;justify-content:center;
        align-items:center;background:white;border-radius:10px;
        height:220px;box-shadow:0 2px 5px rgba(0,0,0,0.05);
    }

    /* Three-dots menu */
    .three-dots {
      position: fixed;
      top: 12px;
      right: 12px;
      z-index: 9999;
      display:flex;align-items:center;justify-content:center;
    }
    .three-dots button {
      width:42px;height:42px;border-radius:10px;border:none;background:rgba(0,0,0,0.06);cursor:pointer;
      display:flex;align-items:center;justify-content:center;font-weight:700;font-size:20px;
      box-shadow:0 6px 18px rgba(16,24,40,0.06);
    }
    .menu-popup {
      position: fixed; top:62px; right:12px; width:200px; background:white; border-radius:10px;
      box-shadow:0 12px 30px rgba(2,6,23,0.12); padding:8px; display:none; z-index:9999;
    }
    .menu-popup a, .menu-popup button {
      display:block;padding:10px;border-radius:8px;text-decoration:none;color:#222;border:none;background:transparent;text-align:left;width:100%;
      font-size:14px;
    }
    .menu-popup a:hover, .menu-popup button:hover{background:#f2f4ff}
    .menu-title{font-weight:700;padding:6px 10px;color:#444;font-size:13px}

    /* About modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.45);display:none;align-items:center;justify-content:center;z-index:9998}
    .modal{background:white;border-radius:12px;padding:16px;width:90%;max-width:420px;box-shadow:0 12px 40px rgba(2,6,23,0.12)}
    .modal h3{margin-bottom:8px}
    .modal p{color:#444;font-size:14px;line-height:1.4}

    /* small helper */
    .small{font-size:13px;color:#666}
    @media (min-width:900px){
      body{padding-bottom:90px}
    }
</style>
</head>
<body>

<header id="screenTitle">Calculator</header>

<!-- Three dots menu (top-right) -->
<div class="three-dots" aria-hidden="false">
  <button id="dotsBtn" aria-label="menu">‚ãÆ</button>
  <div class="menu-popup" id="dotsMenu" role="menu" aria-hidden="true">
    <div class="menu-title">Options</div>
    <a href="#" id="menuAbout">About</a>
    <button id="menuInstagram">Instagram</button>
  </div>
</div>

<!-- About Modal -->
<div class="modal-backdrop" id="modalBackdrop">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="aboutTitle">
    <h3 id="aboutTitle">About Toolbox - QR Generator</h3>
    <p class="small" style="margin-top:6px">Developer: <strong>Saikiran</strong></p>
    <p class="small" style="margin-top:6px">Instagram: <strong>@saikiran.jinde_2706</strong></p>
    <p class="small" style="margin-top:10px">A compact mobile-first toolbox with calculator, converters and a QR generator. QR creation uses Google Chart API for generating images of QR codes.</p>
    <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
      <button id="closeModal" style="background:#ddd;color:#111;border-radius:8px;padding:8px 12px;border:none">Close</button>
    </div>
  </div>
</div>

<!-- CALCULATOR -->
<section id="screen-calculator" class="screen active-screen">
    <div class="card">
        <div class="display" id="calcDisplay">0</div>
        <div class="keys" id="calcKeys">
            <div class="key">7</div><div class="key">8</div><div class="key">9</div><div class="key op">/</div>
            <div class="key">4</div><div class="key">5</div><div class="key">6</div><div class="key op">*</div>
            <div class="key">1</div><div class="key">2</div><div class="key">3</div><div class="key op">-</div>
            <div class="key">0</div><div class="key">.</div><div class="key" id="clear">C</div><div class="key op">+</div>
            <div class="key op" id="equals" style="grid-column:span 4;background:#ff6b6b">=</div>
        </div>
    </div>
</section>

<!-- WEIGHT -->
<section id="screen-weight" class="screen">
    <div class="card">
        <h3>Weight Converter</h3>
        <input id="wValue" type="number" placeholder="Enter value">
        <select id="wFrom">
            <option value="kg">Kg</option>
            <option value="g">Gram</option>
            <option value="lb">Pound</option>
        </select>
        <select id="wTo">
            <option value="g">Gram</option>
            <option value="kg">Kg</option>
            <option value="lb">Pound</option>
        </select>
        <button onclick="convertWeight()">Convert</button>
        <p id="wResult"></p>
    </div>
</section>

<!-- CURRENCY -->
<section id="screen-currency" class="screen">
    <div class="card">
        <h3>Currency Converter</h3>
        <input id="cValue" type="number" placeholder="Amount">
        <select id="cFrom"><option>INR</option><option>USD</option></select>
        <select id="cTo"><option>USD</option><option>INR</option></select>
        <button onclick="convertCurrency()">Convert</button>
        <p id="cResult"></p>
    </div>
</section>

<!-- DISTANCE -->
<section id="screen-distance" class="screen">
    <div class="card">
        <h3>Distance Converter</h3>
        <input id="dValue" type="number" placeholder="Value">
        <select id="dFrom"><option>km</option><option>m</option></select>
        <select id="dTo"><option>m</option><option>km</option></select>
        <button onclick="convertDistance()">Convert</button>
        <p id="dResult"></p>
    </div>
</section>

<!-- QR GENERATOR -->
<section id="screen-qr" class="screen">
    <div class="card">
        <h3>QR Generator</h3>
        <input id="qrText" placeholder="Enter text/URL">
        <input id="qrFile" type="file" />
        <button id="makeQR">Generate QR</button>

        <div id="qrPreview">No QR yet</div>
        <button id="downloadQR" style="background:#ff6b6b;margin-top:12px">
            Download
        </button>

        <p id="qrMsg" style="margin-top:10px;"></p>
        <p id="thank" style="display:none;margin-top:10px;font-weight:700;color:#0a7f45;">
            Thank you for using toolbox-qr generator
        </p>
    </div>
</section>

<!-- BOTTOM NAV -->
<div class="bottom-nav" id="bottomNav">
    <div class="nav-item active" data-target="calculator">
        <span>üßÆ</span>Calc
    </div>
    <div class="nav-item" data-target="weight">
        <span>‚öñÔ∏è</span>Weight
    </div>
    <div class="nav-item" data-target="currency">
        <span>üí±</span>Currency
    </div>
    <div class="nav-item" data-target="distance">
        <span>üìè</span>Distance
    </div>
    <div class="nav-item" data-target="qr">
        <span>üì∑</span>QR
    </div>
</div>

<script>
// ---------------- Bottom Navigation ----------------
const title = document.getElementById("screenTitle");

document.querySelectorAll(".nav-item").forEach(item=>{
    item.addEventListener('click', ()=>{
        document.querySelectorAll(".nav-item").forEach(x=>x.classList.remove("active"));
        item.classList.add("active");

        let target = item.getAttribute("data-target");

        document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active-screen"));
        document.getElementById("screen-"+target).classList.add("active-screen");

        title.textContent = item.textContent.trim();
        // close menu if open
        closeMenu();
    });
});


// ---------------- Calculator ----------------
let calc = "";
const display = document.getElementById("calcDisplay");

document.getElementById("calcKeys").addEventListener("click",(e)=>{
    let key = e.target.innerText;

    if(key==="C"){ calc=""; display.textContent="0"; return; }
    if(key==="="){
        try{
            calc = eval(calc).toString();
        }catch{ calc="Error"; }
        display.textContent=calc; 
        return;
    }

    if(["+", "-", "*", "/"].includes(key)) calc += key;
    else calc += key;

    display.textContent = calc;
});


// ---------------- Weight ----------------
function convertWeight(){
    let v = Number(wValue.value);
    let from = wFrom.value;
    let to = wTo.value;

    let grams = {kg:v*1000, g:v, lb:v*453.592}[from];
    let out = {kg:grams/1000, g:grams, lb:grams/453.592}[to];

    wResult.textContent = `${v} ${from} = ${out.toFixed(4)} ${to}`;
}


// ---------------- Currency ----------------
function convertCurrency(){
    let v = Number(cValue.value);
    let f = cFrom.value;
    let t = cTo.value;

    let usd = f==="INR"? v/83 : v;
    let out = t==="INR"? usd*83 : usd;

    cResult.textContent = `${v} ${f} = ${out.toFixed(3)} ${t}`;
}


// ---------------- Distance ----------------
function convertDistance(){
    let v = Number(dValue.value);
    let from = dFrom.value, to = dTo.value;

    let meters = from==="km"? v*1000 : v;
    let out = to==="km"? meters/1000 : meters;

    dResult.textContent = `${v} ${from} = ${out.toFixed(4)} ${to}`;
}


// ---------------- QR Generator ----------------
let qrURL = "";

document.getElementById("makeQR").onclick = ()=>{
    const text = (qrText.value || '').trim();

    // support if file is provided
    const fileEl = document.getElementById('qrFile');
    if(!text && fileEl.files.length===0){
        qrMsg.textContent="Enter text or upload a small file.";
        return;
    }

    if(fileEl.files.length){
        const f = fileEl.files[0];
        const reader = new FileReader();
        reader.onload = function(e){
            const data = e.target.result;
            if(data.length > 1800){
                qrMsg.textContent = 'File content is large ‚Äî QR may be unreadable. Try small file or use URL.';
            } else {
                qrMsg.textContent = '';
            }
            generateQR(data);
        };
        reader.readAsDataURL(f);
        return;
    }

    generateQR(text);
};

function generateQR(content){
    const encoded = encodeURIComponent(content);
    qrURL = `https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl=${encoded}`;
    qrPreview.innerHTML = `<img src="${qrURL}" style="width:200px;max-width:100%;">`;
    thank.style.display="block";
    qrMsg.textContent = 'QR generated. Download or share.';
}

document.getElementById("downloadQR").onclick = ()=>{
    if(!qrURL) return;
    const a = document.createElement('a');
    a.href = qrURL;
    a.download = "toolbox-qr.png";
    document.body.appendChild(a);
    a.click();
    a.remove();
};


/* ---------- Three-dots menu behavior ---------- */
const dotsBtn = document.getElementById('dotsBtn');
const dotsMenu = document.getElementById('dotsMenu');
const modalBackdrop = document.getElementById('modalBackdrop');
const closeModal = document.getElementById('closeModal');

function openMenu(){
  dotsMenu.style.display = 'block';
  dotsMenu.setAttribute('aria-hidden','false');
}
function closeMenu(){
  dotsMenu.style.display = 'none';
  dotsMenu.setAttribute('aria-hidden','true');
}
dotsBtn.addEventListener('click', (e)=>{
  e.stopPropagation();
  if(dotsMenu.style.display === 'block') closeMenu(); else openMenu();
});
document.addEventListener('click', ()=>{ closeMenu(); });

document.getElementById('menuAbout').addEventListener('click', (e)=>{
  e.preventDefault();
  closeMenu();
  // open about modal
  modalBackdrop.style.display = 'flex';
});
closeModal.addEventListener('click', ()=>{ modalBackdrop.style.display = 'none'; });

document.getElementById('menuInstagram').addEventListener('click', ()=>{
  // open instagram profile in new tab
  window.open('https://instagram.com/saikiran.jinde_2706', '_blank');
  closeMenu();
});

/* ensure menu doesn't block bottom nav clicks when open on mobile */
dotsMenu.addEventListener('touchstart', (e)=> e.stopPropagation());
modalBackdrop.addEventListener('click', ()=>{ modalBackdrop.style.display = 'none'; });

/* accessibility: close modal with Escape */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape'){
    modalBackdrop.style.display = 'none';
    closeMenu();
  }
});
</script>

</body>
</html>